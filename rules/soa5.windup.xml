<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:windup="http://www.jboss.org/schema/windup"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
                        http://www.jboss.org/schema/windup http://www.jboss.org/schema/windup.xsd">


    <windup:pipeline type="XML" id="jboss-esb-xml">
    
        <!-- ######### Highlights ######### -->
        <windup:xpath-value 
            description="Convert JMS gateway listener to service binding"
            xpath="//*[local-name()='jms-listener' and @is-gateway='true']/@name"
            effort="1" inline="false" />
            
        <windup:xpath-value 
            description="ESB-aware listener is no longer required"
            xpath="//*[local-name()='jms-listener' and (not(@is-gateway) or @is-gateway='false')]/@name"
            effort="1" inline="false" />
            
        <windup:xpath-value 
            description="Migrate action processing pipeline for service"
            xpath="//*[local-name()='service']/@name" 
            effort="1" inline="false" />
            
        <windup:xpath-value 
            description="Create component service for"
            xpath="//*[local-name()='service']/@name" 
            effort="1" inline="false"/>
            
        <windup:xpath-value 
            description="Create composite service for service"
            xpath="//*[local-name()='service']/@name" 
            effort="1" inline="false" />
            
        <windup:xpath-value 
            description="Convert action class"
            xpath="//*[local-name()='action' and not(starts-with(@class, 'org.jboss.soa.esb.actions'))]/@class"
            effort="1" inline="false" />
            
        <!-- ######### Notifications ######### -->
        
        <windup:xpath-value description="Action : convert action class"
            xpath="//*[local-name()='action' and not(starts-with(@class, 'org.jboss.soa.esb.actions'))]/@class"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    Custom action classes should be migrated to CDI Beans in SOA 6. These beans
                    can be defined as services or called directly from a Camel route.
        
                    For additional information and tips, see the &lt;a
                    href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;action class microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>
        
        <windup:xpath-summary
            description="Action : create component service for action processing pipeline"
            xpath="//*[local-name()='actions']" 
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    The logic and execution flow of a service in SOA 5 is defined in an
                    action processing pipeline. In SOA 6, this logic is contained within a
                    service component definition and expressed using any of the available
                    implementation types in SwitchYard.
        
                    For additional information and tips, see the &lt;a
                    href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;action pipline microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-summary>
        
        <windup:xpath-value
            description="Action : composite service required for service" 
            xpath="//*[local-name()='service']/@name"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    Each &lt;service&gt; definition in SOA 5 represents a service which can be 
                    called from outside the application through an ESB listner.  The 
                    equivalent definition in SOA 6 is a composite service.
        
                    For additional information and tips, see the 
                    &lt;a href="https://github.com/windup/soa-migration/" 
                    target="_blank"&gt;service migration microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>
        
        <windup:xpath-value
            description="Action : composite service binding required for listener"
            xpath="//*[local-name()='jms-listener' and @is-gateway='true']/@name"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    This listener requires a composite service binding in SwitchYard. The
                    configuration for a JCA or JMS binding can be found in the jms-bus
                    definition associated with this listener.
        
                    For additional information and tips, see the &lt;a
                    href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;gateway listener microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>
        
        <windup:xpath-value
            description="Action : service binding configuration in jms-bus" 
            xpath="//*[local-name()='jms-bus']/@busid"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    A jms-bus definition can be converted to a JMS or JCA gateway binding
                    on a composite service in SwitchYard. If the jms-bus configuration
                    is used for a non-gateway listener, it does not need to be migrated to
                    SOA 6.
        
                    For additional information and tips, see the 
                    &lt;a href="https://github.com/windup/soa-migration/" 
                    target="_blank"&gt;jms-bus migration microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>
        
        <windup:xpath-value
            description="Action : service binding configuration in ftp-bus"
            xpath="//*[local-name()='ftp-bus']/@busid"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    A ftp-bus definition can be converted to a FTP gateway binding
                    on a composite service in SwitchYard.
                    
                    For additional information and tips, see the
                    &lt;a href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;ftp-bus migration microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>
        
        <windup:xpath-value
            description="Action : service binding configuration in ftp-bus"
            xpath="//*[local-name()='camel-bus']/@busid"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    A camel-bus definition can be converted to a Camel gateway binding
                    on a composite service in SwitchYard.
                    
                    For additional information and tips, see the
                    &lt;a href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;camel-bus migration microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>
        
        <windup:xpath-value
            description="Action : composite service binding required for listener"
            xpath="//*[local-name()='http-provider']/@busidref"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    A http-bus definition can be converted to a HTTP gateway binding
                    on a composite service in SwitchYard.
                    
                    For additional information and tips, see the &lt;a
                    href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;gateway listener microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>
        
        <windup:xpath-value
            description="Action : service binding configuration in ftp-bus"
            xpath="//*[local-name()='cron-schedule']/@scheduleid"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    A cron-schedule definition can be converted to a Quartz gateway binding
                    on a composite service in SwitchYard.
                    
                    For additional information and tips, see the
                    &lt;a href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;cron-schedule migration microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>
        
        <windup:xpath-value
            description="Action : composite service binding required for listener"
            xpath="//*[local-name()='ftp-listener' and @is-gateway='true']/@name"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    This listener requires a composite service binding in SwitchYard. The
                    configuration for a FTP binding can be found in the ftp-bus
                    definition associated with this listener.
                    
                    For additional information and tips, see the &lt;a
                    href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;gateway listener microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>
        
        <windup:xpath-value
            description="Action : composite service binding required for listener"
            xpath="//*[local-name()='camel-gateway']/@busidref"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    This gateway requires a composite service binding in SwitchYard. The
                    configuration for a Camel binding can be found in the camel-bus
                    definition associated with this listener.
                    
                    For additional information and tips, see the &lt;a
                    href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;gateway listener microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>
        
        
        <windup:xpath-value description="Action : replace with HTTP binding"
			xpath="//*[local-name()='http-gateway']/@name"
			effort="1" inline="true">
			<windup:hints>
				<windup:regex-hint regex=".*">
					A &lt;http-gateway&gt; can be replaced in SwitchYard by a http
                    binding added to your composite service.      
                    
					For additional information and tips, see the &lt;a
					href="https://github.com/windup/soa-migration/"
					target="_blank"&gt;listener microsite&lt;/a&gt;.
				</windup:regex-hint>
			</windup:hints>
		</windup:xpath-value>
        
        <windup:xpath-value description="Action : convert SmooksAction to Transform"
            xpath="//*[local-name()='action' and @class='org.jboss.soa.esb.smooks.SmooksAction']/@class"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    SwitchYard uses a &lt;transform&gt; to replace the invocation of as SmooksAction
                    to transform message content.    You most likely will want to use a Smooks transform
                    to specify your Smooks configuration and from/to types.
                    
                    For additional information and tips, see the &lt;a
                    href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;transformation microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>

        <windup:xpath-value description="Action : Smooks config conversion"
            xpath="//property[@name='smooksConfig']/@name"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    In a SwitchYard Smooks transform, you can specify your Smooks
                    configuration with the "config" attribute.
                    
                    For additional information and tips, see the &lt;a
                    href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;transformation microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>
        
        <windup:xpath-value description="Action : Smooks resultType conversion"
            xpath="//property[@name='resultType' and @value='JAVA']/@resultType"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    In SwitchYard, both the result and from types need to be
                    specified in a Smooks transformation.
                    
                    For additional information and tips, see the &lt;a
                    href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;transformation microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>
        
        <windup:xpath-value description="Action : convert SOAPProxy"
            xpath="//*[local-name()='action' and @class='org.jboss.soa.esb.actions.soap.proxy.SOAPProxy']/@class"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    Instead of the JBoss ESB SOAPProxy action which transforms a specified
                    WSDL and rewrites the address to the JBossESB server, SwitchYard
                    relies on Camel's routing capability to forward
                    requests from a proxying service to the source.   Create a proxy
                    service and a reference to the original service, and then use Camel
                    to route them.
                    
                    For additional information and tips, see the &lt;a
                    href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;SOAPProxy microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>

        <windup:xpath-value description="Action : convert SystemPrintln"
            xpath="//*[local-name()='action' and @class='org.jboss.soa.esb.actions.SystemPrintln']/@class"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    In order to log your message (or a static logging message), you
                    may want to create a Bean service which logs the message in the
                    manner you wish, or you can use Camel routing to log static
                    logging messages.
                    
                    For additional information and tips, see the &lt;a
                    href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;action class microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>

        
        <windup:xpath-value description="Action : convert StaticRouter to Camel routing"
            xpath="//*[local-name()='action' and @class='org.jboss.soa.esb.actions.StaticRouter']/@class"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    In order to configure static routes for your message in SwitchYard, you
                    should use Camel's routing (either through Java DSL routes or route.xml).
                    
                    For additional information and tips, see the &lt;a
                    href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;action class microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>
        
        <windup:xpath-value description="Action : convert JMSRouter"
            xpath="//*[local-name()='action' and @class='org.jboss.soa.esb.actions.routing.JMSRouter']/@class"
            effort="1" inline="true">
            <windup:hints>
                <windup:regex-hint regex=".*">
                    In order to replace the use of the JMSRouter in SwitchYard, you should use a JMS binding.
                    You may need to review the options for JMS bindings in SwitchYard if you are using the
                    unwrap property.
                    
                    For additional information and tips, see the &lt;a
                    href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;action class microsite&lt;/a&gt;.
                </windup:regex-hint>
            </windup:hints>
        </windup:xpath-value>

        
    </windup:pipeline>
    
    <windup:pipeline type="JAVA" id="java-extension-decorators">
        <!-- Action class becomes bean service -->
        <windup:java-classification
            regex="org.jboss.soa.esb.actions.AbstractActionLifecycle$"
            description="JBossESB Action Class" />
    </windup:pipeline>
    
    <windup:java-hints id="java-persistence-hints">
        <windup:java-hint source-type="INHERITANCE"
            regex="org.jboss.soa.esb.actions.AbstractActionLifecycle$">
            Action classes in SOA 5 are simply CDI Beans in SOA 6.  The extension of AbstractionActionLifecycle is no longer necessary.
            An action class can become a standalone service in SOA 6 or it can be invoked as a bean from a Camel route.
            
            For additional information and tips, see the &lt;a
                    href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;action class microsite&lt;/a&gt;.
        </windup:java-hint>
        <windup:java-hint regex="org.jboss.soa.esb.message.Message" effort="1"> 
            Access to the SwitchYard Message instance is no longer required in SOA 6 to access message content for a service invocation.
            If you are converting this action class to a CDI bean to be invoked from Camel, you can use the org.apache.camel.Message 
            interface in place of org.jboss.soa.esb.message.Message.
            
            For additional information and tips, see the &lt;a
                    href="https://github.com/windup/soa-migration/"
                    target="_blank"&gt;message access microsite&lt;/a&gt;.
        </windup:java-hint>
        <windup:java-hint regex="org.jboss.soa.esb.helpers.ConfigTree" effort="1"> 
            ConfigTree is no longer used in SOA 6.  If you have an action class that requires external configuration, convert the 
            action class to a Bean Service in SOA 6 and use component properties to configure your Bean Service implementation.
        </windup:java-hint>
        <windup:java-hint regex="message.getBody().get()">
            
        </windup:java-hint>
    </windup:java-hints>
</beans>
